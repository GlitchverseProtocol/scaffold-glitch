function init(){scene=new THREE.Scene,scene.fog=new THREE.FogExp2(70430,.025);var e=new THREE.PointLight(16777215,1,100),o=new THREE.AmbientLight(16777215,.5);scene.add(o),e.position.set(10,10,10),scene.add(e);var n=new THREE.AudioLoader,a=new THREE.AudioListener,t=new THREE.TextureLoader;for(let e=0;e<tokenData.length;e++)if("image/png"===tokenData[e].dataType){console.log("image");var s=t.load(tokenData[e].data),i=new THREE.BoxGeometry(1,1,1),r=new THREE.MeshBasicMaterial({map:s}),d=new THREE.Mesh(i,r);d.userData={hasSound:!1,velocity:new THREE.Vector3((Math.random()-.5)*velocityScale,(Math.random()-.5)*velocityScale,(Math.random()-.5)*velocityScale)},d.position.x=2*e-tokenData.length,shapes.push(d),scene.add(d)}else if("audio/ogg"===tokenData[e].dataType){console.log("audio/ogg");var c=new THREE.Audio(a);if(!tokenData[e].data){console.warn("No data for audio");continue}n.load(tokenData[e].data,function(o){c.setBuffer(o),c.setLoop(!0),sounds.push(c),console.log("loaded"),console.log(sounds);var n=new THREE.SphereGeometry(.5,32,32),a=new THREE.MeshPhongMaterial({color:16777215*Math.random()}),t=new THREE.Mesh(n,a);t.position.x=2*e-tokenData.length,t.userData={soundIndex:sounds.length-1},t.userData={soundIndex:sounds.length-1,hasSound:!0,velocity:new THREE.Vector3((Math.random()-.5)*velocityScale,(Math.random()-.5)*velocityScale,(Math.random()-.5)*velocityScale)},shapes.push(t),scene.add(t);for(let e=0;e<shapes.length-1;e++)for(let o=e+1;o<shapes.length;o++){a=new THREE.LineBasicMaterial({color:16777215}),n=(new THREE.BufferGeometry).setFromPoints([shapes[e].position,shapes[o].position]);var s=new THREE.Line(n,a);s.userData={indices:[e,o]},scene.add(s),lines.push(s)}})}camera=new THREE.PerspectiveCamera(55,window.innerWidth/window.innerHeight,.01,1e3),camera.position.set(0,0,10),camera.lookAt(scene.position),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor("#01131E"),document.body.appendChild(renderer.domElement),window.addEventListener("click",onDocumentMouseDown,!1)}function animate(){requestAnimationFrame(animate),shapes.forEach((e,o)=>{e.rotation.x+=.01,e.rotation.y+=.01,e.position.add(e.userData.velocity),(e.position.x<-5||e.position.x>5)&&(e.userData.velocity.x=-e.userData.velocity.x),(e.position.y<-5||e.position.y>5)&&(e.userData.velocity.y=-e.userData.velocity.y),(e.position.z<-5||e.position.z>5)&&(e.userData.velocity.z=-e.userData.velocity.z)}),lines.forEach(e=>{var o=e.userData.indices,n=(new THREE.BufferGeometry).setFromPoints([shapes[o[0]].position,shapes[o[1]].position]);e.geometry=n}),render()}function render(){renderer.render(scene,camera)}function onDocumentMouseDown(e){e.preventDefault(),mouse.x=e.clientX/window.innerWidth*2-1,mouse.y=-e.clientY/window.innerHeight*2+1,raycaster.setFromCamera(mouse,camera);var o=raycaster.intersectObjects(shapes);if(o.length>0){var n=o[0].object;if(n.userData.hasSound){var a=n.userData.soundIndex;sounds[a]?(console.log("soundIndex",a),sounds[a].isPlaying?(console.log("stop"),sounds[a].stop()):(console.log("play"),sounds[a].play())):console.log("Audio is not loaded yet")}}}import*as THREE from"three";var camera,scene,renderer,raycaster=new THREE.Raycaster,mouse=new THREE.Vector2;let sounds=[],shapes=[],lines=[],velocityScale=.05;init(),animate();